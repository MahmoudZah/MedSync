<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up - MedSync</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    body {
      background-color: #f0f2f5;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem 0;
    }

    .auth-card {
      width: 100%;
      max-width: 500px;
      padding: 2rem;
      border-radius: 16px;
      background: white;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    .auth-logo {
      width: 70px;
      object-fit: cover;
      margin-bottom: 1rem;
    }

    .role-card {
      border: 2px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
    }

    .role-card:hover,
    .role-card.active {
      border-color: var(--primary-blue);
      background-color: rgba(52, 152, 219, 0.05);
    }

    .role-icon {
      font-size: 1.5rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .role-card.active .role-icon {
      color: var(--primary-blue);
    }

    /* Company Type Selection */
    .company-type-section {
      display: none;
      margin-bottom: 1rem;
    }

    .company-type-btn {
      border: 2px solid var(--border-color);
      border-radius: 8px;
      padding: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
      background: white;
      text-align: center;
    }

    .company-type-btn:hover,
    .company-type-btn.active {
      border-color: var(--primary-blue);
      background-color: rgba(52, 152, 219, 0.1);
    }

    .company-type-btn i {
      font-size: 1.25rem;
      display: block;
      margin-bottom: 0.25rem;
    }

    .company-type-btn.active i {
      color: var(--primary-blue);
    }

    .company-fields {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
  <div class="auth-card text-center">
    <a href="index.html" class="text-decoration-none">
      <img src="assets/imgs/logo.jpg" alt="MedSync" class=" auth-logo" />
    </a>
    <h3 class="fw-bold mb-1">Create Account</h3>
    <p class="text-muted mb-4">
      Join the network to save medicine and money.
    </p>

    <form id="signupForm">
      <!-- Role Selection -->
      <div class="row g-3 mb-4">
        <div class="col-6">
          <div class="role-card active" id="patientRoleCard" onclick="selectRole('patient')">
            <div class="role-icon"><i class="bi bi-person-heart"></i></div>
            <h6 class="fw-bold mb-1">Patient</h6>
            <small class="text-muted">Find medicine.</small>
          </div>
        </div>
        <div class="col-6">
          <div class="role-card" id="companyRoleCard" onclick="selectRole('company')">
            <div class="role-icon"><i class="bi bi-building"></i></div>
            <h6 class="fw-bold mb-1">Company</h6>
            <small class="text-muted">Business account.</small>
          </div>
        </div>
      </div>
      <input type="hidden" id="roleInput" value="patient" />
      <input type="hidden" id="companyTypeInput" value="" />

      <!-- Company Type Selection -->
      <div class="company-type-section" id="companyTypeSection">
        <p class="text-muted small mb-2 text-start">Select company type:</p>
        <div class="row g-2 mb-3">
          <div class="col-4">
            <div class="company-type-btn" onclick="selectCompanyType('supplier')">
              <i class="bi bi-truck"></i>
              <small class="fw-bold">Supplier</small>
            </div>
          </div>
          <div class="col-4">
            <div class="company-type-btn" onclick="selectCompanyType('pharmacy')">
              <i class="bi bi-shop"></i>
              <small class="fw-bold">Pharmacy</small>
            </div>
          </div>
          <div class="col-4">
            <div class="company-type-btn" onclick="selectCompanyType('hospital')">
              <i class="bi bi-hospital"></i>
              <small class="fw-bold">Hospital</small>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-2">
        <div class="col-md-6">
          <div class="form-floating mb-3 text-start">
            <input type="text" class="form-control" id="firstName" placeholder="John" required />
            <label for="firstName">First Name</label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-floating mb-3 text-start">
            <input type="text" class="form-control" id="lastName" placeholder="Doe" required />
            <label for="lastName">Last Name</label>
          </div>
        </div>
      </div>

      <div class="form-floating mb-3 text-start">
        <input type="email" class="form-control" id="emailInput" placeholder="name@example.com" required />
        <label for="emailInput">Email address</label>
      </div>

      <div class="form-floating mb-3 text-start">
        <input type="password" class="form-control" id="passwordInput" placeholder="Password" required />
        <label for="passwordInput">Password</label>
      </div>

      <!-- Supplier Specific Fields -->
      <div class="company-fields" id="supplierFields">
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="supplierName" placeholder="Company Name" />
          <label for="supplierName">Company Name</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="supplierTaxId" placeholder="Tax ID" />
          <label for="supplierTaxId">Tax ID / Registration Number</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="supplierPhone" placeholder="Phone" />
          <label for="supplierPhone">Business Phone</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <select class="form-control" id="supplierCategory">
            <option selected disabled value="">Select Category</option>
            <option value="pharmaceutical">Pharmaceutical</option>
            <option value="medical_equipment">Medical Equipment</option>
            <option value="consumables">Consumables</option>
            <option value="general">General Supplies</option>
          </select>
          <label for="supplierCategory">Supply Category</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <textarea class="form-control" id="supplierAddress" placeholder="Address" style="height: 80px"></textarea>
          <label for="supplierAddress">Business Address</label>
        </div>
      </div>

      <!-- Pharmacy Specific Fields -->
      <div class="company-fields" id="pharmacyFields">
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="pharmacyName" placeholder="Pharmacy Name" />
          <label for="pharmacyName">Pharmacy Name</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="pharmacyLicense" placeholder="License Number" />
          <label for="pharmacyLicense">Pharmacy License Number</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="pharmacyPhone" placeholder="Phone" />
          <label for="pharmacyPhone">Pharmacy Phone</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <select class="form-control" id="pharmacyLocation">
            <option selected disabled value="">Select Location</option>
            <option value="Cairo">Cairo</option>
            <option value="Giza">Giza</option>
            <option value="Alexandria">Alexandria</option>
            <option value="Mansoura">Mansoura</option>
            <option value="Tanta">Tanta</option>
          </select>
          <label for="pharmacyLocation">Location</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="pharmacyAddress" placeholder="Street Address" />
          <label for="pharmacyAddress">Street Address</label>
        </div>
      </div>

      <!-- Hospital Specific Fields -->
      <div class="company-fields" id="hospitalFields">
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="hospitalName" placeholder="Hospital Name" />
          <label for="hospitalName">Hospital Name</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="hospitalLicense" placeholder="License Number" />
          <label for="hospitalLicense">Hospital License Number</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <select class="form-control" id="hospitalType">
            <option selected disabled value="">Select Type</option>
            <option value="general">General Hospital</option>
            <option value="specialized">Specialized Hospital</option>
            <option value="clinic">Clinic</option>
            <option value="medical_center">Medical Center</option>
          </select>
          <label for="hospitalType">Hospital Type</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="number" class="form-control" id="hospitalBeds" placeholder="Number of Beds" />
          <label for="hospitalBeds">Number of Beds</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="hospitalPhone" placeholder="Phone" />
          <label for="hospitalPhone">Hospital Phone</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <select class="form-control" id="hospitalLocation">
            <option selected disabled value="">Select Location</option>
            <option value="Cairo">Cairo</option>
            <option value="Giza">Giza</option>
            <option value="Alexandria">Alexandria</option>
            <option value="Mansoura">Mansoura</option>
            <option value="Tanta">Tanta</option>
          </select>
          <label for="hospitalLocation">Location</label>
        </div>
        <div class="form-floating mb-3 text-start">
          <input type="text" class="form-control" id="hospitalAddress" placeholder="Address" />
          <label for="hospitalAddress">Full Address</label>
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100 py-2 mb-3">
        Create Account
      </button>
    </form>

    <p class="text-muted small mb-0">
      Already have an account?
      <a href="login.html" class="text-decoration-none fw-bold">Log in</a>
    </p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
  <script src="js/auth.js"></script>
  <script src="js/app.js"></script>
  <script src="js/cart.js"></script>
  <script>
    function selectRole(role) {
      document.querySelectorAll(".role-card").forEach((el) => el.classList.remove("active"));
      event.currentTarget.classList.add("active");
      document.getElementById("roleInput").value = role;

      const companyTypeSection = document.getElementById("companyTypeSection");

      // Hide all company fields
      hideAllCompanyFields();

      if (role === "company") {
        companyTypeSection.style.display = "block";
      } else {
        companyTypeSection.style.display = "none";
        document.getElementById("companyTypeInput").value = "";
        // Reset company type buttons
        document.querySelectorAll(".company-type-btn").forEach((el) => el.classList.remove("active"));
      }
    }

    function selectCompanyType(type) {
      document.querySelectorAll(".company-type-btn").forEach((el) => el.classList.remove("active"));
      event.currentTarget.classList.add("active");
      document.getElementById("companyTypeInput").value = type;

      // Hide all company fields first
      hideAllCompanyFields();

      // Show relevant fields based on company type
      if (type === "supplier") {
        showSupplierFields();
      } else if (type === "pharmacy") {
        showPharmacyFields();
      } else if (type === "hospital") {
        showHospitalFields();
      }
    }

    function hideAllCompanyFields() {
      // Hide all field sections
      document.getElementById("supplierFields").style.display = "none";
      document.getElementById("pharmacyFields").style.display = "none";
      document.getElementById("hospitalFields").style.display = "none";

      // Remove required from all company fields
      const allInputs = document.querySelectorAll(".company-fields input, .company-fields select, .company-fields textarea");
      allInputs.forEach(input => input.required = false);
    }

    function showSupplierFields() {
      const fields = document.getElementById("supplierFields");
      fields.style.display = "block";
      document.getElementById("supplierName").required = true;
      document.getElementById("supplierTaxId").required = true;
      document.getElementById("supplierPhone").required = true;
      document.getElementById("supplierCategory").required = true;
      document.getElementById("supplierAddress").required = true;
    }

    function showPharmacyFields() {
      const fields = document.getElementById("pharmacyFields");
      fields.style.display = "block";
      document.getElementById("pharmacyName").required = true;
      document.getElementById("pharmacyLicense").required = true;
      document.getElementById("pharmacyPhone").required = true;
      document.getElementById("pharmacyLocation").required = true;
      document.getElementById("pharmacyAddress").required = true;
    }

    function showHospitalFields() {
      const fields = document.getElementById("hospitalFields");
      fields.style.display = "block";
      document.getElementById("hospitalName").required = true;
      document.getElementById("hospitalLicense").required = true;
      document.getElementById("hospitalType").required = true;
      document.getElementById("hospitalBeds").required = true;
      document.getElementById("hospitalPhone").required = true;
      document.getElementById("hospitalLocation").required = true;
      document.getElementById("hospitalAddress").required = true;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const role = urlParams.get("role");
      const companyType = urlParams.get("type");

      if (role === "company") {
        document.querySelectorAll(".role-card").forEach((el) => el.classList.remove("active"));
        document.getElementById("companyRoleCard").classList.add("active");
        document.getElementById("roleInput").value = "company";
        document.getElementById("companyTypeSection").style.display = "block";

        if (companyType) {
          document.getElementById("companyTypeInput").value = companyType;
          const typeBtn = document.querySelector(`.company-type-btn[onclick*="${companyType}"]`);
          if (typeBtn) typeBtn.classList.add("active");

          if (companyType === "supplier") showSupplierFields();
          else if (companyType === "pharmacy") showPharmacyFields();
          else if (companyType === "hospital") showHospitalFields();
        }
      } else {
        document.querySelectorAll(".role-card").forEach((el) => el.classList.remove("active"));
        document.getElementById("patientRoleCard").classList.add("active");
        hideAllCompanyFields();
      }
    });
  </script>
</body>

</html>